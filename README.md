# 1. Video Scripts

비디오의 비트레이트 관리를 도와주는 Python 스크립트
- 비트레이트의 효율적인 관리를 위해 비디오를 다양하게 분류해 각각의 디렉토리에 넣어주는 스크립트

## 1.1. 첫 세팅 및 사용
- `.env_example`을 `.env`로 변경
  - 값 변경은 프로그램 재시작 시 반영됨
- `.rootdir_example`을 `.rootdir`로 변경 후 작업 폴더 지정
  - 값 변경은 즉시 반영됨
- 두 파일 초기화 이후 `classify.ipynb`에서 셀을 실행하여 스크립트 기능 사용

<br><br>

# 2. 분류된 폴더 이름 설명
## 2.1. 키프레임 간격 기준 영상 분류
비디오 키프레임을 기반으로 영상을 분류
- `_키프레임조정`: 비디오의 키프레임 값이 허용치(기본값: 2초)보다 큰 비디오

## 2.2. 비트레이트 기준 영상 분류
비트레이트 기준으로 영상을 분류
- `_비트레이트 최적화`: SD 비디오(720p 화질 이하) 대상 분류. 최적 비트레이트보다 과도한 비트레이트가 부여된 SD 비디오
- `_비트레이트 프리셋컷`: HD 비디오(720p 화질 이상) 대상 분류. 최적 비트레이트보다 과도한 비트레이트를 가진 HD 비디오

## 2.3. 비율 기준 영상 분류
비율 기준으로 영상 분류, 가장 가까운 비율로 분류됨. 가까운 비율이 없는 경우는 '커스텀'
- `16-9`, `4-3` 등: 해당 비디오 비율이 16:9, 4:3임
- `rev`가 앞에 붙음: 해당 비율이 세로 버전
  - 예로 `rev 16-9`는 16:9 비율 비디오인데 세로 비디오임
- `기타해상도`: 정량적인 비율로 어림이 불가능한 커스텀 비율의 영상

## 2.4. 영상 모든 정보출력
- `.classify` 메서드 미호출시 영상을 실제로 분류되지 않고, 목록만 출력됨
- `.print`의 `sort key` 매개변수에 커스텀 `lambda`를 지정하면, 해당 조건으로 영상 목록 정렬 가능
- `.include_keyframe_interval`을 호출해 정보에 키프레임 정보를 담을 수 있으나, 많은 오버헤드가 있으므로 필요시에만 호출 권장

## 2.5. 분류된 영상 다시 하나로 모으기
작업 디렉토리의 모든 하위 디렉터리에 속한 비디오를 다시 루트 디렉터리로 합치고 디렉터리는 제거함


<br><br>

# 3. shana_presets
샤나인코더에서 사용가능한 프리셋 파일, 비율 기준 영상 분류 후, 해당 프리셋으로 영상을 일괄 인코딩하면 조금 더 시간을 절약할 수 있음
- `HD+ 기타해상도`: HD 이상 화질의 기타해상도 비디오 전용 프리셋
- `SD- 비트레이트최적화`: `비트레이트 기준 영상 분류`에서 분류된 `_비트레이트 최적화` 비디오 전용 프리셋

<br><br>

# 4. 비디오 분류 순서 추천
1. 키프레임 기준 분류: 키프레임 높은 영상은 어차피 무조건 재인코딩 필요
2. 비트레이트 기준 분류: 여기까지 마쳤을 때 `분류 안 된 영상` == `키프레임 & 비트레이트 최적화된 비디오`이므로 별도 인코딩 필요 없이 바로 소장 가능
3. 비율 기준 분류: 위의 과정에서 분류된 영상의 각 디렉터리에서 다시 비율대로 분류 => `shana_presets`으로 일괄 인코딩 준비

